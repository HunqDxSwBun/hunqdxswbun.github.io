<!DOCTYPE html>
<html>
<!DOCTYPE html>
<html lang="vi">
<!-- Shift + Alt + F  để sắp xếp lại code ( format code )-->
<html>

<head>
  <!-- Tiêu đề trang -->
  <title>Nhật kí tình yêu</title>

  <!-- Bộ giải mã và phân loại thiết bị -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

  <!-- Đảm bảo đặt meta tag sau -->
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta name="apple-mobile-web-app-capable" content="yes">

  <!-- Biểu tượng cho web -->
  <link rel="icon" href="./Data/icon/Logo2.png" />

  <!-- Biểu tượng iPhone -->
  <link rel="apple-touch-icon" href="./Data/icon/Logo.png" sizes="150x150" />


  <!-- FontAweSome fas fa icon -->
  <script src="https://kit.fontawesome.com/9392097706.js" crossorigiln="anonymous"></script>
</head>
<style>
  *{
    margin: 0;
    box-sizing: border-box;
  }
  body {
    padding: 10px;
    background-color: #111111;
    color: #eeeeee;
  }
  /* CSS cho form */
  label {
    display: block;
    margin-bottom: 5px;
  }

  input[type="text"],
  select {
    width: 100%;
    margin-bottom: 15px;
    padding: 10px 5px;
    font-size: 16px;
    color: #eeeeee;
    background-color: #111111;
    border: 2px solid #eeeeee;
    border-radius: 10px;
  }

  textarea {
    width: 100%;
    height: 100px;
    margin-bottom: 15px;
    padding: 10px;
    font-size: 16px;
    color: #eeeeee;
    background-color: #111111;
    border: 2px solid #eeeeee;
    border-radius: 10px;
  }

  button {
    font-size: 18px;
    margin-top: 10px;
    width: 100%;
    padding: 10px ;
    border-radius: 10px;
    border: none;
  }

  pre {
    color: #eeeeee;
    background-color: #000000;
    padding: 10px;
    white-space: pre-wrap;
    border-radius: 10px;
  }
  .Center {
    text-align: center;
  }
</style>

<body>
  <h2>Thêm câu hỏi</h2>
  <form id="questionForm">
    <label for="imgUrl">Hình ảnh:</label>
    <input type="text" id="imgUrl" name="HinhAnh" placeholder="Nhập đường dẫn hình ảnh hoặc để trống" value="/Data/IMG/BannerApp.png">

    <label for="question">Câu hỏi:</label>
    <textarea id="question" name="CauHoi" placeholder="Nhập câu hỏi"></textarea>

    <label for="optionA">Đáp án A:</label>
    <input type="text" id="optionA" name="A" placeholder="Nhập đáp án A">

    <label for="optionB">Đáp án B:</label>
    <input type="text" id="optionB" name="B" placeholder="Nhập đáp án B">

    <label for="optionC">Đáp án C:</label>
    <input type="text" id="optionC" name="C" placeholder="Nhập đáp án C">

    <label for="optionD">Đáp án D:</label>
    <input type="text" id="optionD" name="D" placeholder="Nhập đáp án D">

    <label for="correctOption">Đáp án đúng:</label>
    <select id="correctOption" name="DapAn">
      <option value="A">A</option>
      <option value="B">B</option>
      <option value="C">C</option>
      <option value="D">D</option>
    </select>

    <label for="callFriend">Gọi điện:</label>
    <textarea name="GoiDien" id="callFriend" cols="30" rows="10" placeholder="Nhập lời gọi điện"></textarea>
    <button type="button" onclick="addQuestion()">Tạo câu hỏi</button>
    <button type="button" onclick="saveToLocal()">Lưu vào Local</button>
    <button type="button" onclick="clearLocal()">Xoá tất cả câu hỏi trong Local</button>
  </form>
  <br>
  <br>
  <div>
    <h2 class="Center">Tổng số câu hỏi: <span id="totalQuestions">0</span></h2>
    <div id="outputQuestions"></div> <!-- Vùng hiển thị nội dung câu hỏi -->
  
    <h2 class="Center">Kết quả JSON</h2>
    <pre id="outputJSON"></pre>
  </div>
  

  <script>
    let questions = [];

    // Function to update the total number of questions
    function updateTotalQuestions() {
      const totalQuestions = questions.length;
      const totalQuestionsElement = document.getElementById("totalQuestions");
      totalQuestionsElement.innerText = totalQuestions;
    }

    // Function to display questions in the output area
    function displayQuestions() {
      const outputArea = document.getElementById("outputQuestions");
      outputArea.innerHTML = "";

      questions.forEach((question, index) => {
        const questionElement = document.createElement("div");
        questionElement.innerHTML = `
          <p>Câu hỏi ${index + 1}: ${question.CauHoi}</p>
        `;
        outputArea.appendChild(questionElement);
      });
    }

    function addQuestion() {
      const imgUrl = document.getElementById("imgUrl").value;
      const question = document.getElementById("question").value;
      const optionA = document.getElementById("optionA").value;
      const optionB = document.getElementById("optionB").value;
      const optionC = document.getElementById("optionC").value;
      const optionD = document.getElementById("optionD").value;
      const correctOption = document.getElementById("correctOption").value;
      const callFriend = document.getElementById("callFriend").value;

      const newQuestion = {
        HinhAnh: imgUrl,
        CauHoi: question,
        A: optionA,
        B: optionB,
        C: optionC,
        D: optionD,
        DapAn: correctOption,
        GoiDien: callFriend,
      };

      questions.push(newQuestion);
      clearForm();
      displayJSON();
      updateTotalQuestions();
      displayQuestions();
    }

    function clearForm() {
      document.getElementById("questionForm").reset();
    }

    function saveToJson() {
      const jsonData = JSON.stringify(questions, null, 2);
      const blob = new Blob([jsonData], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "questions.json";
      a.click();
    }

    function displayJSON() {
      const outputArea = document.getElementById("outputJSON");
      const jsonData = JSON.stringify(questions, null, 2);
      outputArea.innerText = jsonData;
    }

    // Function to save questions to local storage
    function saveToLocal() {
      localStorage.setItem("questions", JSON.stringify(questions));
      alert("Các câu hỏi đã được lưu vào Local Storage.");
    }

    // Function to clear all questions from local storage
    function clearLocal() {
      localStorage.removeItem("questions");
      questions = [];
      updateTotalQuestions();
      displayQuestions();
      alert("Xoá tất cả câu hỏi trong Local Storage thành công.");
    }

    // Function to check and load questions from local storage on page load
    function loadFromLocal() {
      const storedQuestions = localStorage.getItem("questions");
      if (storedQuestions) {
        questions = JSON.parse(storedQuestions);
        updateTotalQuestions();
        displayQuestions();
      }
    }

    // Check and load questions from local storage when the page loads
    loadFromLocal();
  </script>
</body>

</html>